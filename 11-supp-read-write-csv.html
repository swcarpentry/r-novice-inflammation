<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Programming with R: Reading and Writing CSV Files</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav software"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Software Carpentry" src="assets/images/software-logo.svg"></div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/11-supp-read-write-csv.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Programming with R
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
      <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Programming with R
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Basic Operation</a></li>
          </ul></li>
      </ul></div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled><input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset></form>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Programming with R
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 65%" class="percentage">
    65%
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: 65%" aria-valuenow="65" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/11-supp-read-write-csv.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-starting-with-data.html">1. Analyzing Patient Data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-func-R.html">2. Creating Functions</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-loops-R.html">3. Analyzing Multiple Data Sets</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-cond.html">4. Making Choices</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-cmdline.html">5. Command-Line Programs</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-best-practices-R.html">6. Best Practices for Writing R Code</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-knitr-R.html">7. Dynamic Reports with knitr</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-making-packages-R.html">8. Making Packages in R</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-supp-intro-rstudio.html">9. Introduction to RStudio</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-supp-addressing-data.html">10. Addressing Data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        11. Reading and Writing CSV Files
        </span>
      
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="12-supp-factors.html">12. Understanding Factors</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="13-supp-data-structures.html">13. Data Types and Structures</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="14-supp-call-stack.html">14. The Call Stack</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="15-supp-loops-in-depth.html">15. Loops in R</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html">Basic Operation</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="10-supp-addressing-data.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="12-supp-factors.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="10-supp-addressing-data.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Addressing Data
        </a>
        <a class="chapter-link float-end" href="12-supp-factors.html" rel="next">
          Next: Understanding... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Reading and Writing CSV Files</h1>
        <p> Last updated on 2023-11-07 | 
        
        <a href="https://github.com/swcarpentry/r-novice-inflammation/edit/main/episodes/11-supp-read-write-csv.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How do I read data from a CSV file into R?</li>
<li>How do I write data to a CSV file?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Read in a .csv, and explore the arguments of the csv reader.</li>
<li>Write the altered data set to a new .csv, and explore the
arguments.</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>The most common way that scientists store data is in Excel
spreadsheets. While there are R packages designed to access data from
Excel spreadsheets (e.g., gdata, RODBC, XLConnect, xlsx, RExcel), users
often find it easier to save their spreadsheets in <a href="reference.html#comma-separated-values-csv)%20files%20(CSV">comma-separated
values</a> and then use R’s built in functionality to read and
manipulate the data. In this short lesson, we’ll learn how to read data
from a .csv and write to a new .csv, and explore the <a href="reference.html#argument">arguments</a> that allow you read and
write the data correctly for your needs.</p>
<div class="section level3">
<h3 id="read-a--csv-and-explore-the-arguments">Read a .csv and Explore the Arguments<a class="anchor" aria-label="anchor" href="#read-a--csv-and-explore-the-arguments"></a></h3>
<p>Let’s start by opening a .csv file containing information on the
speeds at which cars of different colors were clocked in 45 mph zones in
the four-corners states (<code>CarSpeeds.csv</code>). We will use the
built in <code>read.csv(...)</code> <a href="reference.html#function-call">function call</a>, which reads the
data in as a data frame, and assign the data frame to a variable (using
<code>&lt;-</code>) so that it is stored in R’s memory. Then we will
explore some of the basic arguments that can be supplied to the
function. First, open the RStudio project containing the scripts and
data you were working on in episode ‘Analyzing Patient Data’.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Import the data and look at the first six rows</span></span>
<span><span class="va">carSpeeds</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">'data/car-speeds.csv'</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Color Speed     State
1  Blue    32 NewMexico
2   Red    45   Arizona
3  Blue    35  Colorado
4 White    34   Arizona
5   Red    25   Arizona
6  Blue    41   Arizona</code></pre>
</div>
<div id="changing-delimiters" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="changing-delimiters" class="callout-inner">
<h3 class="callout-title">Changing Delimiters<a class="anchor" aria-label="anchor" href="#changing-delimiters"></a>
</h3>
<div class="callout-content">
<p>The default delimiter of the <code>read.csv()</code> function is a
comma, but you can use other delimiters by supplying the ‘sep’ argument
to the function (e.g., typing <code>sep = ';'</code> allows a semi-colon
separated file to be correctly imported - see <code>?read.csv()</code>
for more information on this and other options for working with
different file types).</p>
</div>
</div>
</div>
<p>The call above will import the data, but we have not taken advantage
of several handy arguments that can be helpful in loading the data in
the format we want. Let’s explore some of these arguments.</p>
</div>
<div class="section level3">
<h3 id="the-header-argument">The <code>header</code> Argument<a class="anchor" aria-label="anchor" href="#the-header-argument"></a></h3>
<p>The default for <code>read.csv(...)</code> is to set the
<code>header</code> argument to <code>TRUE</code>. This means that the
first row of values in the .csv is set as header information (column
names). If your data set does not have a header, set the
<code>header</code> argument to <code>FALSE</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The first row of the data without setting the header argument:</span></span>
<span><span class="va">carSpeeds</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Color Speed     State
1  Blue    32 NewMexico</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The first row of the data if the header argument is set to FALSE:</span></span>
<span><span class="va">carSpeeds</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">'data/car-speeds.csv'</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">carSpeeds</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     V1    V2    V3
1 Color Speed State</code></pre>
</div>
<p>Clearly this is not the desired behavior for this data set, but it
may be useful if you have a dataset without headers.</p>
</div>
<div class="section level3">
<h3 id="the-stringsasfactors-argument">The <code>stringsAsFactors</code> Argument<a class="anchor" aria-label="anchor" href="#the-stringsasfactors-argument"></a></h3>
<p>In older versions of R (prior to 4.0) this was perhaps the most
important argument in <code>read.csv()</code>, particularly if you were
working with categorical data. This is because the default behavior of R
was to convert character <a href="reference.html#string">string</a>s
into <a href="12-supp-factors.html">factors</a>, which may make it
difficult to do such things as replace values. It is important to be
aware of this behaviour, which we will demonstrate. For example, let’s
say we find out that the data collector was color blind, and
accidentally recorded green cars as being blue. In order to correct the
data set, let’s replace ‘Blue’ with ‘Green’ in the <code>$Color</code>
column:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Here we will use R's `ifelse` function, in which we provide the test phrase,</span></span>
<span><span class="co"># the outcome if the result of the test is 'TRUE', and the outcome if the</span></span>
<span><span class="co"># result is 'FALSE'. We will also assign the results to the Color column,</span></span>
<span><span class="co"># using '&lt;-'</span></span>
<span></span>
<span><span class="co"># First - reload the data with a header</span></span>
<span><span class="va">carSpeeds</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">'data/car-speeds.csv'</span>, stringsAsFactors <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span> <span class="op">&lt;-</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span> <span class="op">==</span> <span class="st">'Blue'</span>, <span class="st">'Green'</span>, <span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span><span class="op">)</span></span>
<span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  [1] "Green" "1"     "Green" "5"     "4"     "Green" "Green" "2"     "5"    
 [10] "4"     "4"     "5"     "Green" "Green" "2"     "4"     "Green" "Green"
 [19] "5"     "Green" "Green" "Green" "4"     "Green" "4"     "4"     "4"    
 [28] "4"     "5"     "Green" "4"     "5"     "2"     "4"     "2"     "2"    
 [37] "Green" "4"     "2"     "4"     "2"     "2"     "4"     "4"     "5"    
 [46] "2"     "Green" "4"     "4"     "2"     "2"     "4"     "5"     "4"    
 [55] "Green" "Green" "2"     "Green" "5"     "2"     "4"     "Green" "Green"
 [64] "5"     "2"     "4"     "4"     "2"     "Green" "5"     "Green" "4"    
 [73] "5"     "5"     "Green" "Green" "Green" "Green" "Green" "5"     "2"    
 [82] "Green" "5"     "2"     "2"     "4"     "4"     "5"     "5"     "5"    
 [91] "5"     "4"     "4"     "4"     "5"     "2"     "5"     "2"     "2"    
[100] "5"    </code></pre>
</div>
<p>What happened?!? It looks like ‘Blue’ was replaced with ‘Green’, but
every other color was turned into a number (as a character string, given
the quote marks before and after). This is because the colors of the
cars were loaded as factors, and the factor level was reported following
replacement.</p>
<p>To see the internal structure, we can use another function,
<code>str()</code>. In this case, the dataframe’s internal structure
includes the format of each column, which is what we are interested in.
<code>str()</code> will be reviewed a little more in the lesson <a href="13-supp-data-structures.html">Data Types and Structures</a>.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reload the data with a header (the previous ifelse call modifies attributes)</span></span>
<span><span class="va">carSpeeds</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">'data/car-speeds.csv'</span>, stringsAsFactors <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	100 obs. of  3 variables:
 $ Color: Factor w/ 5 levels " Red","Black",..: 3 1 3 5 4 3 3 2 5 4 ...
 $ Speed: int  32 45 35 34 25 41 34 29 31 26 ...
 $ State: Factor w/ 4 levels "Arizona","Colorado",..: 3 1 2 1 1 1 3 2 1 2 ...</code></pre>
</div>
<p>We can see that the <code>$Color</code> and <code>$State</code>
columns are factors and <code>$Speed</code> is a numeric column.</p>
<p>Now, let’s load the dataset using
<code>stringsAsFactors=FALSE</code>, and see what happens when we try to
replace ‘Blue’ with ‘Green’ in the <code>$Color</code> column:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">carSpeeds</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">'data/car-speeds.csv'</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	100 obs. of  3 variables:
 $ Color: chr  "Blue" " Red" "Blue" "White" ...
 $ Speed: int  32 45 35 34 25 41 34 29 31 26 ...
 $ State: chr  "NewMexico" "Arizona" "Colorado" "Arizona" ...</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span> <span class="op">&lt;-</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span> <span class="op">==</span> <span class="st">'Blue'</span>, <span class="st">'Green'</span>, <span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span><span class="op">)</span></span>
<span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  [1] "Green" " Red"  "Green" "White" "Red"   "Green" "Green" "Black" "White"
 [10] "Red"   "Red"   "White" "Green" "Green" "Black" "Red"   "Green" "Green"
 [19] "White" "Green" "Green" "Green" "Red"   "Green" "Red"   "Red"   "Red"  
 [28] "Red"   "White" "Green" "Red"   "White" "Black" "Red"   "Black" "Black"
 [37] "Green" "Red"   "Black" "Red"   "Black" "Black" "Red"   "Red"   "White"
 [46] "Black" "Green" "Red"   "Red"   "Black" "Black" "Red"   "White" "Red"  
 [55] "Green" "Green" "Black" "Green" "White" "Black" "Red"   "Green" "Green"
 [64] "White" "Black" "Red"   "Red"   "Black" "Green" "White" "Green" "Red"  
 [73] "White" "White" "Green" "Green" "Green" "Green" "Green" "White" "Black"
 [82] "Green" "White" "Black" "Black" "Red"   "Red"   "White" "White" "White"
 [91] "White" "Red"   "Red"   "Red"   "White" "Black" "White" "Black" "Black"
[100] "White"</code></pre>
</div>
<p>That’s better! And we can see how the data now is read as character
instead of factor. From R version 4.0 onwards we do not have to specify
<code>stringsAsFactors=FALSE</code>, this is the default behavior.</p>
</div>
<div class="section level3">
<h3 id="the-as-is-argument">The <code>as.is</code> Argument<a class="anchor" aria-label="anchor" href="#the-as-is-argument"></a></h3>
<p>This is an extension of the <code>stringsAsFactors</code> argument,
but gives you control over individual columns. For example, if we want
the colors of cars imported as strings, but we want the names of the
states imported as factors, we would load the data set as:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">carSpeeds</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">'data/car-speeds.csv'</span>, as.is <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Note, the 1 applies as.is to the first column only</span></span></code></pre>
</div>
<p>Now we can see that if we try to replace ‘Blue’ with ‘Green’ in the
<code>$Color</code> column everything looks fine, while trying to
replace ‘Arizona’ with ‘Ohio’ in the <code>$State</code> column returns
the factor numbers for the names of states that we haven’t replaced:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	100 obs. of  3 variables:
 $ Color: chr  "Blue" " Red" "Blue" "White" ...
 $ Speed: int  32 45 35 34 25 41 34 29 31 26 ...
 $ State: Factor w/ 4 levels "Arizona","Colorado",..: 3 1 2 1 1 1 3 2 1 2 ...</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span> <span class="op">&lt;-</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span> <span class="op">==</span> <span class="st">'Blue'</span>, <span class="st">'Green'</span>, <span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span><span class="op">)</span></span>
<span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  [1] "Green" " Red"  "Green" "White" "Red"   "Green" "Green" "Black" "White"
 [10] "Red"   "Red"   "White" "Green" "Green" "Black" "Red"   "Green" "Green"
 [19] "White" "Green" "Green" "Green" "Red"   "Green" "Red"   "Red"   "Red"  
 [28] "Red"   "White" "Green" "Red"   "White" "Black" "Red"   "Black" "Black"
 [37] "Green" "Red"   "Black" "Red"   "Black" "Black" "Red"   "Red"   "White"
 [46] "Black" "Green" "Red"   "Red"   "Black" "Black" "Red"   "White" "Red"  
 [55] "Green" "Green" "Black" "Green" "White" "Black" "Red"   "Green" "Green"
 [64] "White" "Black" "Red"   "Red"   "Black" "Green" "White" "Green" "Red"  
 [73] "White" "White" "Green" "Green" "Green" "Green" "Green" "White" "Black"
 [82] "Green" "White" "Black" "Black" "Red"   "Red"   "White" "White" "White"
 [91] "White" "Red"   "Red"   "Red"   "White" "Black" "White" "Black" "Black"
[100] "White"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">State</span> <span class="op">&lt;-</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">State</span> <span class="op">==</span> <span class="st">'Arizona'</span>, <span class="st">'Ohio'</span>, <span class="va">carSpeeds</span><span class="op">$</span><span class="va">State</span><span class="op">)</span></span>
<span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">State</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  [1] "3"    "Ohio" "2"    "Ohio" "Ohio" "Ohio" "3"    "2"    "Ohio" "2"   
 [11] "4"    "4"    "4"    "4"    "4"    "3"    "Ohio" "3"    "Ohio" "4"   
 [21] "4"    "4"    "3"    "2"    "2"    "3"    "2"    "4"    "2"    "4"   
 [31] "3"    "2"    "2"    "4"    "2"    "2"    "3"    "Ohio" "4"    "2"   
 [41] "2"    "3"    "Ohio" "4"    "Ohio" "2"    "3"    "3"    "3"    "2"   
 [51] "Ohio" "4"    "4"    "Ohio" "3"    "2"    "4"    "2"    "4"    "4"   
 [61] "4"    "2"    "3"    "2"    "3"    "2"    "3"    "Ohio" "3"    "4"   
 [71] "4"    "2"    "Ohio" "4"    "2"    "2"    "2"    "Ohio" "3"    "Ohio"
 [81] "4"    "2"    "2"    "Ohio" "Ohio" "Ohio" "4"    "Ohio" "4"    "4"   
 [91] "4"    "Ohio" "Ohio" "3"    "2"    "2"    "4"    "3"    "Ohio" "4"   </code></pre>
</div>
<p>We can see that <code>$Color</code> column is a character while
<code>$State</code> is a factor.</p>
<div id="updating-values-in-a-factor" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="updating-values-in-a-factor" class="callout-inner">
<h3 class="callout-title">Updating Values in a Factor<a class="anchor" aria-label="anchor" href="#updating-values-in-a-factor"></a>
</h3>
<div class="callout-content">
<p>Suppose we want to keep the colors of cars as factors for some other
operations we want to perform. Write code for replacing ‘Blue’ with
‘Green’ in the <code>$Color</code> column of the cars dataset without
importing the data with <code>stringsAsFactors=FALSE</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">carSpeeds</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">'data/car-speeds.csv'</span><span class="op">)</span></span>
<span><span class="co"># Replace 'Blue' with 'Green' in cars$Color without using the stringsAsFactors</span></span>
<span><span class="co"># or as.is arguments</span></span>
<span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span> <span class="op">&lt;-</span> <span class="fu">ifelse</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span><span class="op">)</span> <span class="op">==</span> <span class="st">'Blue'</span>,</span>
<span>                         <span class="st">'Green'</span>,</span>
<span>                         <span class="fu">as.character</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Convert colors back to factors</span></span>
<span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span> <span class="op">&lt;-</span> <span class="fu">as.factor</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="the-strip-white-argument">The <code>strip.white</code> Argument<a class="anchor" aria-label="anchor" href="#the-strip-white-argument"></a></h3>
<p>It is not uncommon for mistakes to have been made when the data were
recorded, for example a space (whitespace) may have been inserted before
a data value. By default this whitespace will be kept in the R
environment, such that ‘\ Red’ will be recognized as a different value
than ‘Red’. In order to avoid this type of error, use the
<code>strip.white</code> argument. Let’s see how this works by checking
for the unique values in the <code>$Color</code> column of our
dataset:</p>
<p>Here, the data recorder added a space before the color of the car in
one of the cells:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># We use the built-in unique() function to extract the unique colors in our dataset</span></span>
<span><span class="fu">unique</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] Green  Red  White Red   Black
Levels:  Red Black Green Red White</code></pre>
</div>
<p>Oops, we see two values for red cars.</p>
<p>Let’s try again, this time importing the data using the
<code>strip.white</code> argument. NOTE - this argument must be
accompanied by the <code>sep</code> argument, by which we indicate the
type of delimiter in the file (the comma for most .csv files)</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">carSpeeds</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="st">'data/car-speeds.csv'</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  strip.white <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">','</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu">unique</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Color</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Blue"  "Red"   "White" "Black"</code></pre>
</div>
<p>That’s better!</p>
<div id="specify-missing-data-when-loading" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="specify-missing-data-when-loading" class="callout-inner">
<h3 class="callout-title">Specify Missing Data When Loading<a class="anchor" aria-label="anchor" href="#specify-missing-data-when-loading"></a>
</h3>
<div class="callout-content">
<p>It is common for data sets to have missing values, or mistakes. The
convention for recording missing values often depends on the individual
who collected the data and can be recorded as <code>n.a.</code>,
<code>--</code>, or empty cells ” “. R recognises the reserved character
string <code>NA</code> as a missing value, but not some of the examples
above. Let’s say the inflamation scale in the data set we used earlier
<code>inflammation-01.csv</code> actually starts at <code>1</code> for
no inflamation and the zero values (<code>0</code>) were a missed
observation. Looking at the <code>?read.csv</code> help page is there an
argument we could use to ensure all zeros (<code>0</code>) are read in
as <code>NA</code>? Perhaps, in the <code>car-speeds.csv</code> data
contains mistakes and the person measuring the car speeds could not
accurately distinguish between”Black or “Blue” cars. Is there a way to
specify more than one ‘string’, such as “Black” and “Blue”, to be
replaced by <code>NA</code></p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/inflammation-01.csv"</span>, na.strings <span class="op">=</span> <span class="st">"0"</span><span class="op">)</span></span></code></pre>
</div>
<p>or , in <code>car-speeds.csv</code> use a character vector for
multiple values.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">read.csv</span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="st">'data/car-speeds.csv'</span>,</span>
<span>  na.strings <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Black"</span>, <span class="st">"Blue"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="write-a-new--csv-and-explore-the-arguments">Write a New .csv and Explore the Arguments<a class="anchor" aria-label="anchor" href="#write-a-new--csv-and-explore-the-arguments"></a></h3>
<p>After altering our cars dataset by replacing ‘Blue’ with ‘Green’ in
the <code>$Color</code> column, we now want to save the output. There
are several arguments for the <code>write.csv(...)</code> <a href="reference.html#function-call">function call</a>, a few of which
are particularly important for how the data are exported. Let’s explore
these now.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Export the data. The write.csv() function requires a minimum of two</span></span>
<span><span class="co"># arguments, the data to be saved and the name of the output file.</span></span>
<span></span>
<span><span class="fu">write.csv</span><span class="op">(</span><span class="va">carSpeeds</span>, file <span class="op">=</span> <span class="st">'data/car-speeds-cleaned.csv'</span><span class="op">)</span></span></code></pre>
</div>
<p>If you open the file, you’ll see that it has header names, because
the data had headers within R, but that there are numbers in the first
column.</p>
<figure><img src="fig/01-supp-csv-with-row-nums.png" alt="csv written without row.names argument" class="figure mx-auto d-block"></figure></div>
<div class="section level3">
<h3 id="the-row-names-argument">The <code>row.names</code> Argument<a class="anchor" aria-label="anchor" href="#the-row-names-argument"></a></h3>
<p>This argument allows us to set the names of the rows in the output
data file. R’s default for this argument is <code>TRUE</code>, and since
it does not know what else to name the rows for the cars data set, it
resorts to using row numbers. To correct this, we can set
<code>row.names</code> to <code>FALSE</code>:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write.csv</span><span class="op">(</span><span class="va">carSpeeds</span>, file <span class="op">=</span> <span class="st">'data/car-speeds-cleaned.csv'</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<p>Now we see:</p>
<figure><img src="fig/01-supp-csv-without-row-nums.png" alt="csv written with row.names argument" class="figure mx-auto d-block"></figure><div id="setting-column-names" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="setting-column-names" class="callout-inner">
<h3 class="callout-title">Setting Column Names<a class="anchor" aria-label="anchor" href="#setting-column-names"></a>
</h3>
<div class="callout-content">
<p>There is also a <code>col.names</code> argument, which can be used to
set the column names for a data set without headers. If the data set
already has headers (e.g., we used the <code>headers = TRUE</code>
argument when importing the data) then a <code>col.names</code> argument
will be ignored.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="the-na-argument">The <code>na</code> Argument<a class="anchor" aria-label="anchor" href="#the-na-argument"></a></h3>
<p>There are times when we want to specify certain values for
<code>NA</code>s in the data set (e.g., we are going to pass the data to
a program that only accepts -9999 as a nodata value). In this case, we
want to set the <code>NA</code> value of our output file to the desired
value, using the na argument. Let’s see how this works:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, replace the speed in the 3rd row with NA, by using an index (square</span></span>
<span><span class="co"># brackets to indicate the position of the value we want to replace)</span></span>
<span><span class="va">carSpeeds</span><span class="op">$</span><span class="va">Speed</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">carSpeeds</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Color Speed     State
1  Blue    32 NewMexico
2   Red    45   Arizona
3  Blue    NA  Colorado
4 White    34   Arizona
5   Red    25   Arizona
6  Blue    41   Arizona</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write.csv</span><span class="op">(</span><span class="va">carSpeeds</span>, file <span class="op">=</span> <span class="st">'data/car-speeds-cleaned.csv'</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<p>Now we’ll set <code>NA</code> to -9999 when we write the new .csv
file:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Note - the na argument requires a string input</span></span>
<span><span class="fu">write.csv</span><span class="op">(</span><span class="va">carSpeeds</span>,</span>
<span>          file <span class="op">=</span> <span class="st">'data/car-speeds-cleaned.csv'</span>,</span>
<span>          row.names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          na <span class="op">=</span> <span class="st">'-9999'</span><span class="op">)</span></span></code></pre>
</div>
<p>And we see:</p>
<figure><img src="fig/01-supp-csv-with-special-NA.png" alt="csv written with -9999 as NA" class="figure mx-auto d-block"></figure><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Import data from a .csv file using the <code>read.csv(...)</code>
function.</li>
<li>Understand some of the key arguments available for importing the
data properly, including <code>header</code>,
<code>stringsAsFactors</code>, <code>as.is</code>, and
<code>strip.white</code>.</li>
<li>Write data to a new .csv file using the <code>write.csv(...)</code>
function</li>
<li>Understand some of the key arguments available for exporting the
data properly, such as <code>row.names</code>, <code>col.names</code>,
and <code>na</code>.</li>
</ul></div>
</div>
</div>
</div>



      </div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="10-supp-addressing-data.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="12-supp-factors.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="10-supp-addressing-data.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Addressing Data
        </a>
        <a class="chapter-link float-end" href="12-supp-factors.html" rel="next">
          Next: Understanding... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
				<p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/swcarpentry/r-novice-inflammation/edit/main/episodes/11-supp-read-write-csv.Rmd" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/swcarpentry/r-novice-inflammation/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a> 
        | <a href="https://github.com/swcarpentry/r-novice-inflammation/" class="external-link">Source</a></p>
				<p><a href="https://github.com/swcarpentry/r-novice-inflammation/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">Template licensed under CC-BY 4.0</a> by <a href="https://carpentries.org" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.14.1" class="external-link">sandpaper (0.14.1)</a>,
        <a href="https://github.com/carpentries/pegboard/tree/0.7.1" class="external-link">pegboard (0.7.1)</a>,
      and <a href="https://github.com/carpentries/varnish/tree/0.3.3" class="external-link">varnish (0.3.3)</a>.</p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
			<i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back to top"></i><br><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://swcarpentry.github.io/r-novice-inflammation/11-supp-read-write-csv.html",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Reading and Writing CSV Files",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/r-novice-inflammation/11-supp-read-write-csv.html",
  "identifier": "https://swcarpentry.github.io/r-novice-inflammation/11-supp-read-write-csv.html",
  "dateCreated": "2014-12-18",
  "dateModified": "2023-11-07",
  "datePublished": "2023-11-14"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

