<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Programming with R: Command-Line Programs</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav software"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Software Carpentry" src="assets/images/software-logo.svg"></div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/05-cmdline.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Programming with R
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Programming with R
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Basic Operation</a></li>
          </ul></li>
      </ul></div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled><input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset></form>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Programming with R
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 34%" class="percentage">
    34%
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: 34%" aria-valuenow="34" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/05-cmdline.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-starting-with-data.html">1. Analyzing Patient Data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-func-R.html">2. Creating Functions</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-loops-R.html">3. Analyzing Multiple Data Sets</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-cond.html">4. Making Choices</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        5. Command-Line Programs
        </span>
      
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-best-practices-R.html">6. Best Practices for Writing R Code</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-knitr-R.html">7. Dynamic Reports with knitr</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-making-packages-R.html">8. Making Packages in R</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-supp-intro-rstudio.html">9. Introduction to RStudio</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-supp-addressing-data.html">10. Addressing Data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-supp-read-write-csv.html">11. Reading and Writing CSV Files</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="12-supp-factors.html">12. Understanding Factors</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="13-supp-data-structures.html">13. Data Types and Structures</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="14-supp-call-stack.html">14. The Call Stack</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="15-supp-loops-in-depth.html">15. Loops in R</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html">Basic Operation</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="04-cond.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="06-best-practices-R.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="04-cond.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Making Choices
        </a>
        <a class="chapter-link float-end" href="06-best-practices-R.html" rel="next">
          Next: Best Practices for... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Command-Line Programs</h1>
        <p>Last updated on 2023-12-05 |
        
        <a href="https://github.com/swcarpentry/r-novice-inflammation/edit/main/episodes/05-cmdline.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How do I write a command-line script?</li>
<li>How do I read in arguments from the command-line?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Use the values of command-line arguments in a program.</li>
<li>Handle flags and files separately in a command-line program.</li>
<li>Read data from standard input in a program so that it can be used in
a pipeline.</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>The R Console and other interactive tools like RStudio are great for
prototyping code and exploring data, but sooner or later we will want to
use our program in a pipeline or run it in a shell script to process
thousands of data files. In order to do that, we need to make our
programs work like other Unix command-line tools. For example, we may
want a program that reads a data set and prints the average inflammation
per patient:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> Rscript readings.R <span class="at">--mean</span> data/inflammation-01.csv</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">5.45</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">5.425</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ex">6.1</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ex">...</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="ex">6.4</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="ex">7.05</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="ex">5.9</span></span></code></pre>
</div>
<p>but we might also want to look at the minimum of the first four
lines</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-4</span> data/inflammation-01.csv <span class="kw">|</span> <span class="ex">Rscript</span> readings.R <span class="at">--min</span></span></code></pre>
</div>
<p>or the maximum inflammations in several files one after another:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> Rscript readings.R <span class="at">--max</span> data/inflammation-<span class="pp">*</span>.csv</span></code></pre>
</div>
<p>Our overall requirements are:</p>
<ol style="list-style-type: decimal"><li>If no filename is given on the command line, read data from <a href="reference.html#standard-input-stdin">standard input</a>.</li>
<li>If one or more filenames are given, read data from them and report
statistics for each file separately.</li>
<li>Use the <code>--min</code>, <code>--mean</code>, or
<code>--max</code> flag to determine what statistic to print.</li>
</ol><p>To make this work, we need to know how to handle command-line
arguments in a program, and how to get at standard input. We’ll tackle
these questions in turn below.</p>
<div class="section level3">
<h3 id="command-line-arguments">Command-Line Arguments<a class="anchor" aria-label="anchor" href="#command-line-arguments"></a></h3>
<p>Using the text editor of your choice, save the following line of code
in a text file called <code>session-info.R</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fu">sessionInfo</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>The function, <code>sessionInfo</code>, outputs the version of R you
are running as well as the type of computer you are using (as well as
the versions of the packages that have been loaded). This is very useful
information to include when asking others for help with your R code.</p>
<p>Now we can run the code in the file we created from the Unix Shell
using <code>Rscript</code>:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> session-info.R</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>R version 4.3.2 (2023-10-31)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 22.04.3 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.10.0 
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0

locale:
 [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       
 [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   
 [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          
[10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   

time zone: UTC
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] compiler_4.3.2</code></pre>
</div>
<div id="the-right-directory" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-right-directory" class="callout-inner">
<h3 class="callout-title">The Right Directory<a class="anchor" aria-label="anchor" href="#the-right-directory"></a>
</h3>
<div class="callout-content">
<p>If that did not work, you might have seen an error message indicating
that the file <code>session-info.R</code> does not exist. Remember that
you must be in the correct directory, the one in which you created your
script file. You can determine which directory you are currently in
using <code>pwd</code> and change to a different directory using
<code>cd</code>. For a review, see this <a href="https://swcarpentry.github.io/shell-novice/02-filedir/" class="external-link">lesson</a>.</p>
</div>
</div>
</div>
<p>Now let’s create another script that does something more interesting.
Write the following lines in a file named <code>print-args.R</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">cat</span><span class="op">(</span><span class="va">args</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></code></pre>
</div>
<p>The function <code>commandArgs</code> extracts all the command line
arguments and returns them as a vector. The function <code>cat</code>,
similar to the <code>cat</code> of the Unix Shell, outputs the contents
of the variable. Since we did not specify a filename for writing,
<code>cat</code> sends the output to <a href="reference.html#standard-output-stdout">standard output</a>, which
we can then pipe to other Unix functions. Because we set the argument
<code>sep</code> to <code>"\n"</code>, which is the symbol to start a
new line, each element of the vector is printed on its own line. Let’s
see what happens when we run this program in the Unix Shell:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> print-args.R</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/usr/lib/R/bin/exec/R
--no-echo
--no-restore
--file=print-args.R</code></pre>
</div>
<p>From this output, we learn that <code>Rscript</code> is just a
convenience command for running R scripts. The first argument in the
vector is the path to the <code>R</code> executable. The following are
all command-line arguments that affect the behavior of R. From the R
help file:</p>
<ul><li>
<code>--no-echo</code>: Make R run as quietly as possible</li>
<li>
<code>--no-restore</code>: Don’t restore anything that was created
during the R session</li>
<li>
<code>--file</code>: Run this file</li>
<li>
<code>--args</code>: Pass these arguments to the file being run</li>
</ul><p>Thus running a file with Rscript is an easier way to run the
following:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> <span class="at">--no-echo</span> <span class="at">--no-restore</span> <span class="at">--file</span><span class="op">=</span>print-args.R <span class="at">--args</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/usr/lib/R/bin/exec/R
--no-echo
--no-restore
--file=print-args.R
--args</code></pre>
</div>
<p>If we run it with a few arguments, however:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> print-args.R first second third</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/usr/lib/R/bin/exec/R
--no-echo
--no-restore
--file=print-args.R
--args
first
second
third</code></pre>
</div>
<p>then <code>commandArgs</code> adds each of those arguments to the
vector it returns. Since the first elements of the vector are always the
same, we can tell <code>commandArgs</code> to only return the arguments
that come after <code>--args</code>. Let’s update
<code>print-args.R</code> and save it as
<code>print-args-trailing.R</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">cat</span><span class="op">(</span><span class="va">args</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></code></pre>
</div>
<p>And then run <code>print-args-trailing</code> from the Unix
Shell:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> print-args-trailing.R first second third</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">first</span></span>
<span><span class="va">second</span></span>
<span><span class="va">third</span></span></code></pre>
</div>
<p>Now <code>commandArgs</code> returns only the arguments that we
listed after <code>print-args-trailing.R</code>.</p>
<p>With this in hand, let’s build a version of <code>readings.R</code>
that always prints the per-patient (per-row) mean of a single data file.
The first step is to write a function that outlines our implementation,
and a placeholder for the function that does the actual work. By
convention this function is usually called <code>main</code>, though we
can call it whatever we want. Write the following code in a file called
<code>readings-01.R</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">filename</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="va">filename</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="va">mean_per_patient</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">mean</span><span class="op">)</span></span>
<span>  <span class="fu">cat</span><span class="op">(</span><span class="va">mean_per_patient</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>This function gets the name of the file to process from the first
element returned by <code>commandArgs</code>. Here’s a simple test to
run from the Unix Shell:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> readings-01.R data/inflammation-01.csv</span></code></pre>
</div>
<p>There is no output because we have defined a function, but haven’t
actually called it. Let’s add a call to <code>main</code> and save it as
<code>readings-02.R</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">filename</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="va">filename</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="va">mean_per_patient</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">mean</span><span class="op">)</span></span>
<span>  <span class="fu">cat</span><span class="op">(</span><span class="va">mean_per_patient</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">main</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> readings-02.R data/inflammation-01.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">5.45</span></span>
<span><span class="fl">5.425</span></span>
<span><span class="fl">6.1</span></span>
<span><span class="fl">5.9</span></span>
<span><span class="fl">5.55</span></span>
<span><span class="fl">6.225</span></span>
<span><span class="fl">5.975</span></span>
<span><span class="fl">6.65</span></span>
<span><span class="fl">6.625</span></span>
<span><span class="fl">6.525</span></span>
<span><span class="fl">6.775</span></span>
<span><span class="fl">5.8</span></span>
<span><span class="fl">6.225</span></span>
<span><span class="fl">5.75</span></span>
<span><span class="fl">5.225</span></span>
<span><span class="fl">6.3</span></span>
<span><span class="fl">6.55</span></span>
<span><span class="fl">5.7</span></span>
<span><span class="fl">5.85</span></span>
<span><span class="fl">6.55</span></span>
<span><span class="fl">5.775</span></span>
<span><span class="fl">5.825</span></span>
<span><span class="fl">6.175</span></span>
<span><span class="fl">6.1</span></span>
<span><span class="fl">5.8</span></span>
<span><span class="fl">6.425</span></span>
<span><span class="fl">6.05</span></span>
<span><span class="fl">6.025</span></span>
<span><span class="fl">6.175</span></span>
<span><span class="fl">6.55</span></span>
<span><span class="fl">6.175</span></span>
<span><span class="fl">6.35</span></span>
<span><span class="fl">6.725</span></span>
<span><span class="fl">6.125</span></span>
<span><span class="fl">7.075</span></span>
<span><span class="fl">5.725</span></span>
<span><span class="fl">5.925</span></span>
<span><span class="fl">6.15</span></span>
<span><span class="fl">6.075</span></span>
<span><span class="fl">5.75</span></span>
<span><span class="fl">5.975</span></span>
<span><span class="fl">5.725</span></span>
<span><span class="fl">6.3</span></span>
<span><span class="fl">5.9</span></span>
<span><span class="fl">6.75</span></span>
<span><span class="fl">5.925</span></span>
<span><span class="fl">7.225</span></span>
<span><span class="fl">6.15</span></span>
<span><span class="fl">5.95</span></span>
<span><span class="fl">6.275</span></span>
<span><span class="fl">5.7</span></span>
<span><span class="fl">6.1</span></span>
<span><span class="fl">6.825</span></span>
<span><span class="fl">5.975</span></span>
<span><span class="fl">6.725</span></span>
<span><span class="fl">5.7</span></span>
<span><span class="fl">6.25</span></span>
<span><span class="fl">6.4</span></span>
<span><span class="fl">7.05</span></span>
<span><span class="fl">5.9</span></span></code></pre>
</div>
<div id="a-simple-command-line-program" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="a-simple-command-line-program" class="callout-inner">
<h3 class="callout-title">A Simple Command-Line Program<a class="anchor" aria-label="anchor" href="#a-simple-command-line-program"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li>Write a command-line program that does addition and subtraction of
two numbers.</li>
</ol><p><strong>Hint:</strong> Everything argument read from the command-line
is interpreted as a character <a href="reference.html#string">string</a>. You can convert from a string
to a number using the function <code>as.numeric</code>.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> arith.R 1 + 2</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">3</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> arith.R 3 <span class="at">-</span> 4</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="op">-</span><span class="fl">1</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> arith.R</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Performs addition or subtraction from the command line.</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="co"># Takes three arguments:</span></span>
<span>  <span class="co"># The first and third are the numbers.</span></span>
<span>  <span class="co"># The second is either + for addition or - for subtraction.</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="co"># Ex. usage:</span></span>
<span>  <span class="co">#   Rscript arith.R 1 + 2</span></span>
<span>  <span class="co">#   Rscript arith.R 3 - 4</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">num1</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">operation</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span>  <span class="va">num2</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="va">args</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">operation</span> <span class="op">==</span> <span class="st">"+"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">answer</span> <span class="op">&lt;-</span> <span class="va">num1</span> <span class="op">+</span> <span class="va">num2</span></span>
<span>    <span class="fu">cat</span><span class="op">(</span><span class="va">answer</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">operation</span> <span class="op">==</span> <span class="st">"-"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">answer</span> <span class="op">&lt;-</span> <span class="va">num1</span> <span class="op">-</span> <span class="va">num2</span></span>
<span>    <span class="fu">cat</span><span class="op">(</span><span class="va">answer</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="kw">stop</span><span class="op">(</span><span class="st">"Invalid input. Use + for addition or - for subtraction."</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">main</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="a-simple-command-line-program" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="a-simple-command-line-program" class="callout-inner">
<h3 class="callout-title">A Simple Command-Line Program<em>(continued)</em><a class="anchor" aria-label="anchor" href="#a-simple-command-line-program"></a>
</h3>
<div class="callout-content">
<ol start="2" style="list-style-type: decimal"><li>What goes wrong if you try to add multiplication using
<code>*</code> to the program?</li>
</ol></div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>An error message is returned due to “invalid input.” This is likely
because ‘*’ has a special meaning in the shell, as a wildcard.</p>
</div>
</div>
</div>
</div>
<div id="a-simple-command-line-program" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="a-simple-command-line-program" class="callout-inner">
<h3 class="callout-title">A Simple Command-Line Program<em>(continued)</em><a class="anchor" aria-label="anchor" href="#a-simple-command-line-program"></a>
</h3>
<div class="callout-content">
<ol start="3" style="list-style-type: decimal"><li>Using the function <code>list.files</code> introduced in a previous
<a href="03-loops-R.html">lesson</a>, write a command-line program
called <code>find-pattern.R</code> that lists all the files in the
current directory that contain a specific pattern:</li>
</ol><div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For example, searching for the pattern "print-args" returns the two scripts we wrote earlier</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> find-pattern.R print-args</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">print</span><span class="op">-</span><span class="va">args</span><span class="op">-</span><span class="va">trailing.R</span></span>
<span><span class="va">print</span><span class="op">-</span><span class="va">args.R</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> find-pattern.R</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Finds all files in the current directory that contain a given pattern.</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="co"># Takes one argument: the pattern to be searched.</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="co"># Ex. usage:</span></span>
<span>  <span class="co">#   Rscript find-pattern.R csv</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">pattern</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">files</span> <span class="op">&lt;-</span> <span class="fu">list.files</span><span class="op">(</span>pattern <span class="op">=</span> <span class="va">pattern</span><span class="op">)</span></span>
<span>  <span class="fu">cat</span><span class="op">(</span><span class="va">files</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">main</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="handling-multiple-files">Handling Multiple Files<a class="anchor" aria-label="anchor" href="#handling-multiple-files"></a></h3>
<p>The next step is to teach our program how to handle multiple files.
Since 60 lines of output per file is a lot to page through, we’ll start
by using three smaller files, each of which has three days of data for
two patients. Let’s investigate them from the Unix Shell:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> data/small-<span class="pp">*</span>.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>data/small-01.csv
data/small-02.csv
data/small-03.csv</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> data/small-01.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0,0,1
0,1,2</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> readings-02.R data/small-01.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0.3333333</span></span>
<span><span class="fl">1</span></span></code></pre>
</div>
<p>Using small data files as input also allows us to check our results
more easily: here, for example, we can see that our program is
calculating the mean correctly for each line, whereas we were really
taking it on faith before. This is yet another rule of programming: test
the simple things first.</p>
<p>We want our program to process each file separately, so we need a
loop that executes once for each filename. If we specify the files on
the command line, the filenames will be returned by
<code>commandArgs(trailingOnly = TRUE)</code>. We’ll need to handle an
unknown number of filenames, since our program could be run for any
number of files.</p>
<p>The solution is to loop over the vector returned by
<code>commandArgs(trailingOnly = TRUE)</code>. Here’s our changed
program, which we’ll save as <code>readings-03.R</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">filename</span> <span class="kw">in</span> <span class="va">args</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="va">filename</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>    <span class="va">mean_per_patient</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">mean</span><span class="op">)</span></span>
<span>    <span class="fu">cat</span><span class="op">(</span><span class="va">mean_per_patient</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">main</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>and here it is in action:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> readings-03.R data/small-01.csv data/small-02.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0.3333333</span></span>
<span><span class="fl">1</span></span>
<span><span class="fl">13.66667</span></span>
<span><span class="fl">11</span></span></code></pre>
</div>
<p><strong>Note</strong>: at this point, we have created three versions
of our script called <code>readings-01.R</code>,
<code>readings-02.R</code>, and <code>readings-03.R</code>. We wouldn’t
do this in real life: instead, we would have one file called
<code>readings.R</code> that we committed to version control every time
we got an enhancement working. For teaching, though, we need all the
successive versions side by side.</p>
<div id="a-command-line-program-with-arguments" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="a-command-line-program-with-arguments" class="callout-inner">
<h3 class="callout-title">A Command Line Program with Arguments<a class="anchor" aria-label="anchor" href="#a-command-line-program-with-arguments"></a>
</h3>
<div class="callout-content">
<p>Write a program called <code>check.R</code> that takes the names of
one or more inflammation data files as arguments and checks that all the
files have the same number of rows and columns. What is the best way to
test your program?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">Show me the solution</h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> check.R</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Checks that all csv files have the same number of rows and columns.</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="co"># Takes multiple arguments: the names of the files to be checked.</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="co"># Ex. usage:</span></span>
<span>  <span class="co">#   Rscript check.R inflammation-*</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">first_file</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="va">first_dim</span> <span class="op">&lt;-</span> <span class="fu">dim</span><span class="op">(</span><span class="va">first_file</span><span class="op">)</span></span>
<span><span class="co">#   num_rows &lt;- dim(first_file)[1]  # nrow(first_file)</span></span>
<span><span class="co">#   num_cols &lt;- dim(first_file)[2]  # ncol(first_file)</span></span>
<span>  </span>
<span>  </span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">filename</span> <span class="kw">in</span> <span class="va">args</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">new_file</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="va">filename</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>    <span class="va">new_dim</span> <span class="op">&lt;-</span> <span class="fu">dim</span><span class="op">(</span><span class="va">new_file</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">new_dim</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">!=</span> <span class="va">first_dim</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">|</span> <span class="va">new_dim</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">!=</span> <span class="va">first_dim</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">cat</span><span class="op">(</span><span class="st">"Not all the data files have the same dimensions."</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">main</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="handling-command-line-flags">Handling Command-Line Flags<a class="anchor" aria-label="anchor" href="#handling-command-line-flags"></a></h3>
<p>The next step is to teach our program to pay attention to the
<code>--min</code>, <code>--mean</code>, and <code>--max</code> flags.
These always appear before the names of the files, so let’s save the
following in <code>readings-04.R</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">action</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">filenames</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">f</span> <span class="kw">in</span> <span class="va">filenames</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="va">f</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--min"</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">min</span><span class="op">)</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--mean"</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">mean</span><span class="op">)</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--max"</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">max</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="fu">cat</span><span class="op">(</span><span class="va">values</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">main</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>And we can confirm this works by running it from the Unix Shell:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> readings-04.R <span class="at">--max</span> data/small-01.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">1</span></span>
<span><span class="fl">2</span></span></code></pre>
</div>
<p>but there are several things wrong with it:</p>
<ol style="list-style-type: decimal"><li><p><code>main</code> is too large to read comfortably.</p></li>
<li><p>If <code>action</code> isn’t one of the three recognized flags,
the program loads each file but does nothing with it (because none of
the branches in the conditional match). <a href="reference.html#silent-failure">Silent failures</a> like this are
always hard to debug.</p></li>
</ol><p>This version pulls the processing of each file out of the loop into a
function of its own. It also uses <code>stopifnot</code> to check that
<code>action</code> is one of the allowed flags before doing any
processing, so that the program fails fast. We’ll save it as
<code>readings-05.R</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">action</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">filenames</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="fu">stopifnot</span><span class="op">(</span><span class="va">action</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"--min"</span>, <span class="st">"--mean"</span>, <span class="st">"--max"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">f</span> <span class="kw">in</span> <span class="va">filenames</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">process</span><span class="op">(</span><span class="va">f</span>, <span class="va">action</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">process</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">filename</span>, <span class="va">action</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="va">filename</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--min"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">min</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--mean"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">mean</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--max"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">max</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu">cat</span><span class="op">(</span><span class="va">values</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">main</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>This is four lines longer than its predecessor, but broken into more
digestible chunks of 8 and 12 lines.</p>
<div id="parsing-command-line-flags" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="parsing-command-line-flags" class="callout-inner">
<h3 class="callout-title">Parsing Command-Line Flags<a class="anchor" aria-label="anchor" href="#parsing-command-line-flags"></a>
</h3>
<div class="callout-content">
<p>R has a package named <a href="https://cran.r-project.org/package=argparse" class="external-link">argparse</a> that
helps handle complex command-line flags (it utilizes a <a href="https://docs.python.org/dev/library/argparse.html" class="external-link">Python
module</a> of the same name). We will not cover this package in this
lesson but when you start writing programs with multiple parameters
you’ll want to read through the package’s <a href="https://cran.r-project.org/package=argparse/vignettes/argparse.html" class="external-link">vignette</a>.</p>
</div>
</div>
</div>
<div id="shorter-command-line-arguments" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="shorter-command-line-arguments" class="callout-inner">
<h3 class="callout-title">Shorter Command Line Arguments<a class="anchor" aria-label="anchor" href="#shorter-command-line-arguments"></a>
</h3>
<div class="callout-content">
<p>Rewrite this program so that it uses <code>-n</code>,
<code>-m</code>, and <code>-x</code> instead of <code>--min</code>,
<code>--mean</code>, and <code>--max</code> respectively. Is the code
easier to read? Is the program easier to understand?</p>
<p>Separately, modify the program so that if no action is specified (or
an incorrect action is given), it prints a message explaining how it
should be used.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">Show me the solution</h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> readings-short.R</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">action</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">filenames</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="fu">stopifnot</span><span class="op">(</span><span class="va">action</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"-n"</span>, <span class="st">"-m"</span>, <span class="st">"-x"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">f</span> <span class="kw">in</span> <span class="va">filenames</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">process</span><span class="op">(</span><span class="va">f</span>, <span class="va">action</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">process</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">filename</span>, <span class="va">action</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="va">filename</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"-n"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">min</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"-m"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">mean</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"-x"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">max</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu">cat</span><span class="op">(</span><span class="va">values</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">main</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>The program is neither easier to read nor easier to understand due to
the ambiguity of the argument names.</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> readings-usage.R</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">action</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">filenames</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">action</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"--min"</span>, <span class="st">"--mean"</span>, <span class="st">"--max"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">usage</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">f</span> <span class="kw">in</span> <span class="va">filenames</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">process</span><span class="op">(</span><span class="va">f</span>, <span class="va">action</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">process</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">filename</span>, <span class="va">action</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="va">filename</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--min"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">min</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--mean"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">mean</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--max"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">max</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu">cat</span><span class="op">(</span><span class="va">values</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">usage</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">cat</span><span class="op">(</span><span class="st">"usage: Rscript readings-usage.R [--min, --mean, --max] filenames"</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">main</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="handling-standard-input">Handling Standard Input<a class="anchor" aria-label="anchor" href="#handling-standard-input"></a></h3>
<p>The next thing our program has to do is read data from standard input
if no filenames are given so that we can put it in a pipeline, redirect
input to it, and so on. Let’s experiment in another script, which we’ll
save as <code>count-stdin.R</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">lines</span> <span class="op">&lt;-</span> <span class="fu">readLines</span><span class="op">(</span>con <span class="op">=</span> <span class="fu">file</span><span class="op">(</span><span class="st">"stdin"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">count</span> <span class="op">&lt;-</span> <span class="fu">length</span><span class="op">(</span><span class="va">lines</span><span class="op">)</span></span>
<span><span class="fu">cat</span><span class="op">(</span><span class="st">"lines in standard input: "</span><span class="op">)</span></span>
<span><span class="fu">cat</span><span class="op">(</span><span class="va">count</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></code></pre>
</div>
<p>This little program reads lines from the program’s standard input
using <code>file("stdin")</code>. This allows us to do almost anything
with it that we could do to a regular file. In this example, we passed
it as an argument to the function <code>readLines</code>, which stores
each line as an element in a vector. Let’s try running it from the Unix
Shell as if it were a regular command-line program:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> count-stdin.R <span class="op">&lt;</span> data/small-01.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>lines in standard input: 2</code></pre>
</div>
<p>Note that because we did not specify <code>sep = "\n"</code> when
calling <code>cat</code>, the output is written on the same line.</p>
<p>A common mistake is to try to run something that reads from standard
input like this:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> count-stdin.R data/small-01.csv</span></code></pre>
</div>
<p>i.e., to forget the <code>&lt;</code> character that redirect the
file to standard input. In this case, there’s nothing in standard input,
so the program waits at the start of the loop for someone to type
something on the keyboard. We can type some input, but R keeps running
because it doesn’t know when the standard input has ended. If you ran
this, you can pause R by typing <kbd>Ctrl</kbd>+<kbd>Z</kbd>
(technically it is still paused in the background; if you want to fully
kill the process type <code>kill %</code>; see <a href="https://www.gnu.org/software/bash/manual/bash.html#Job-Control-Basics" class="external-link">bash
manual</a> for more information).</p>
<p>We now need to rewrite the program so that it loads data from
<code>file("stdin")</code> if no filenames are provided. Luckily,
<code>read.csv</code> can handle either a filename or an open file as
its first parameter, so we don’t actually need to change
<code>process</code>. That leaves <code>main</code>, which we’ll update
and save as <code>readings-06.R</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">action</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">filenames</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="fu">stopifnot</span><span class="op">(</span><span class="va">action</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"--min"</span>, <span class="st">"--mean"</span>, <span class="st">"--max"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu">length</span><span class="op">(</span><span class="va">filenames</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">process</span><span class="op">(</span><span class="fu">file</span><span class="op">(</span><span class="st">"stdin"</span><span class="op">)</span>, <span class="va">action</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">f</span> <span class="kw">in</span> <span class="va">filenames</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">process</span><span class="op">(</span><span class="va">f</span>, <span class="va">action</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">process</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">filename</span>, <span class="va">action</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="va">filename</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--min"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">min</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--mean"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">mean</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">action</span> <span class="op">==</span> <span class="st">"--max"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">max</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu">cat</span><span class="op">(</span><span class="va">values</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">main</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Let’s try it out. Instead of calculating the mean inflammation of
every patient, we’ll only calculate the mean for the first 10 patients
(rows):</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> data/inflammation-01.csv <span class="kw">|</span> <span class="ex">Rscript</span> readings-06.R <span class="at">--mean</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">5.45</span></span>
<span><span class="fl">5.425</span></span>
<span><span class="fl">6.1</span></span>
<span><span class="fl">5.9</span></span>
<span><span class="fl">5.55</span></span>
<span><span class="fl">6.225</span></span>
<span><span class="fl">5.975</span></span>
<span><span class="fl">6.65</span></span>
<span><span class="fl">6.625</span></span>
<span><span class="fl">6.525</span></span></code></pre>
</div>
<p>And now we’re done: the program now does everything we set out to
do.</p>
<div id="implementing-wc-in-r" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="implementing-wc-in-r" class="callout-inner">
<h3 class="callout-title">Implementing<code>wc</code>in R<a class="anchor" aria-label="anchor" href="#implementing-wc-in-r"></a>
</h3>
<div class="callout-content">
<p>Write a program called <code>line-count.R</code> that works like the
Unix <code>wc</code> command:</p>
<ul><li>If no filenames are given, it reports the number of lines in
standard input.</li>
<li>If one or more filenames are given, it reports the number of lines
in each, followed by the total number of lines.</li>
</ul></div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">Show me the solution</h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> line-count.R</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">main</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">args</span> <span class="op">&lt;-</span> <span class="fu">commandArgs</span><span class="op">(</span>trailingOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu">length</span><span class="op">(</span><span class="va">args</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">total_lines</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">filename</span> <span class="kw">in</span> <span class="va">args</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">input</span> <span class="op">&lt;-</span> <span class="fu">readLines</span><span class="op">(</span><span class="va">filename</span><span class="op">)</span></span>
<span>      <span class="va">num_lines</span> <span class="op">&lt;-</span> <span class="fu">length</span><span class="op">(</span><span class="va">input</span><span class="op">)</span></span>
<span>      <span class="fu">cat</span><span class="op">(</span><span class="va">filename</span><span class="op">)</span></span>
<span>      <span class="fu">cat</span><span class="op">(</span><span class="st">" "</span><span class="op">)</span></span>
<span>      <span class="fu">cat</span><span class="op">(</span><span class="va">num_lines</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span>      <span class="va">total_lines</span> <span class="op">&lt;-</span> <span class="va">total_lines</span> <span class="op">+</span> <span class="va">num_lines</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu">length</span><span class="op">(</span><span class="va">args</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">cat</span><span class="op">(</span><span class="st">"Total "</span><span class="op">)</span></span>
<span>      <span class="fu">cat</span><span class="op">(</span><span class="va">total_lines</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">input</span> <span class="op">&lt;-</span> <span class="fu">readLines</span><span class="op">(</span><span class="fu">file</span><span class="op">(</span><span class="st">"stdin"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">num_lines</span> <span class="op">&lt;-</span> <span class="fu">length</span><span class="op">(</span><span class="va">input</span><span class="op">)</span></span>
<span>    <span class="fu">cat</span><span class="op">(</span><span class="va">num_lines</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">main</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Use <code>commandArgs(trailingOnly = TRUE)</code> to obtain a vector
of the command-line arguments that a program was run with.</li>
<li>Avoid silent failures.</li>
<li>Use <code>file("stdin")</code> to connect to a program’s standard
input.</li>
<li>Use <code>cat(vec, sep = "\n")</code> to write the elements of
<code>vec</code> to standard output, one per line.</li>
</ul></div>
</div>
</div>
</div>



      </div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="04-cond.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="06-best-practices-R.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="04-cond.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Making Choices
        </a>
        <a class="chapter-link float-end" href="06-best-practices-R.html" rel="next">
          Next: Best Practices for... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/swcarpentry/r-novice-inflammation/edit/main/episodes/05-cmdline.Rmd" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/swcarpentry/r-novice-inflammation/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/swcarpentry/r-novice-inflammation/" class="external-link">Source</a></p>
				<p><a href="https://github.com/swcarpentry/r-novice-inflammation/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.2" class="external-link">sandpaper (0.16.2)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.3" class="external-link">pegboard (0.7.3)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.1" class="external-link">varnish (1.0.1)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://swcarpentry.github.io/r-novice-inflammation/05-cmdline.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Command-Line Programs",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/r-novice-inflammation/05-cmdline.html",
  "identifier": "https://swcarpentry.github.io/r-novice-inflammation/05-cmdline.html",
  "dateCreated": "2014-12-18",
  "dateModified": "2023-12-05",
  "datePublished": "2024-01-03"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

