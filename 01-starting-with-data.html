<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Programming with R: Analyzing Patient Data</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [ ['$','$'], ['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav software"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Software Carpentry" src="assets/images/software-logo.svg"></div>
    </div>
    <div class="selector-container ">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/01-starting-with-data.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Programming with R
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
      <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Programming with R
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Basic Operation</a></li>
          </ul></li>
      </ul></div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled><input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset></form>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Programming with R
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 0%" class="percentage">
    0%
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: 0%" aria-valuenow="0" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
  <div id="sidebar-col" class="col-lg-4">
    <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle"><i class="search-icon" data-feather="x" role="img"></i></button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/01-starting-with-data.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        1. Analyzing Patient Data
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#getting-started">Getting started</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-func-R.html">2. Creating Functions</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-loops-R.html">3. Analyzing Multiple Data Sets</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-cond.html">4. Making Choices</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-cmdline.html">5. Command-Line Programs</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-best-practices-R.html">6. Best Practices for Writing R Code</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-knitr-R.html">7. Dynamic Reports with knitr</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-making-packages-R.html">8. Making Packages in R</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-supp-intro-rstudio.html">9. Introduction to RStudio</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-supp-addressing-data.html">10. Addressing Data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-supp-read-write-csv.html">11. Reading and Writing CSV Files</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="12-supp-factors.html">12. Understanding Factors</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="13-supp-data-structures.html">13. Data Types and Structures</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="14-supp-call-stack.html">14. The Call Stack</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="15-supp-loops-in-depth.html">15. Loops in R</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html">Basic Operation</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">See all in one page</a>

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="02-func-R.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="index.html" rel="prev"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="02-func-R.html" rel="next">Next: Creating Functions... <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Analyzing Patient Data</h1>
        <p> Last updated on 2023-08-11 | 
        
        <a href="https://github.com/swcarpentry/r-novice-inflammation/edit/main/episodes/01-starting-with-data.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How do I read data into R?</li>
<li>How do I assign variables?</li>
<li>What is a data frame?</li>
<li>How do I access subsets of a data frame?</li>
<li>How do I calculate simple statistics like mean and median?</li>
<li>Where can I get help?</li>
<li>How can I plot my data?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Read tabular data from a file into a program.</li>
<li>Assign values to variables.</li>
<li>Select individual values and subsections from data.</li>
<li>Perform operations on a data frame of data.</li>
<li>Display simple graphs.</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>We are studying inflammation in patients who have been given a new
treatment for arthritis, and need to analyze the first dozen data sets
(here is a link to <a href="data/r-novice-inflammation-data.zip">download the data for this
lesson</a>). The data sets are stored in <a href="reference.html#comma-separated-values-csv">comma-separated
values</a> (CSV) format. Each row holds the observations for just one
patient. Each column holds the inflammation measured in a day, so we
have a set of values in successive days. The first few rows of our first
file look like this:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0,0,1,3,1,2,4,7,8,3,3,3,10,5,7,4,7,7,12,18,6,13,11,11,7,7,4,6,8,8,4,4,5,7,3,4,2,3,0,0
0,1,2,1,2,1,3,2,2,6,10,11,5,9,4,4,7,16,8,6,18,4,12,5,12,7,11,5,11,3,3,5,4,4,5,5,1,1,0,1
0,1,1,3,3,2,6,2,5,9,5,7,4,5,4,15,5,11,9,10,19,14,12,17,7,12,11,7,4,2,10,5,4,2,2,3,2,2,1,1
0,0,2,0,4,2,2,1,6,7,10,7,9,13,8,8,15,10,10,7,17,4,4,7,6,15,6,4,9,11,3,5,6,3,3,4,2,3,2,1
0,1,1,3,3,1,3,5,2,4,4,7,6,5,3,10,8,10,6,17,9,14,9,7,13,9,12,6,7,7,9,6,3,2,2,4,2,0,1,1</code></pre>
</div>
<p>We want to:</p>
<ul><li>Load data into memory,</li>
<li>Calculate the average value of inflammation per day across all
patients, and</li>
<li>Plot the results.</li>
</ul><p>To do all that, we’ll have to learn a little bit about
programming.</p>
<section id="getting-started"><h2 class="section-heading">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<hr class="half-width"><p>Since we want to import the file called
<code>inflammation-01.csv</code> into our R environment, we need to be
able to tell our computer where the file is. To do this, we will create
a “Project” with RStudio that contains the data we want to work with.
The “Projects” interface in RStudio not only creates a working directory
for you, but also remembers its location (allowing you to quickly
navigate to it). The interface also (optionally) preserves custom
settings and open files to make it easier to resume work after a
break.</p>
<div class="section level3">
<h3 id="create-a-new-project">Create a new project<a class="anchor" aria-label="anchor" href="#create-a-new-project"></a></h3>
<ul><li>Under the <code>File</code> menu in RStudio, click on
<code>New project</code>, choose <code>New directory</code>, then
<code>New project</code>
</li>
<li>Enter a name for this new folder (or “directory”) and choose a
convenient location for it. This will be your <strong>working
directory</strong> for the rest of the day (e.g.,
<code>~/Desktop/r-novice-inflammation</code>).</li>
<li>Click on <code>Create project</code>
</li>
<li>Create a new file where we will type our scripts. Go to File &gt;
New File &gt; R script. Click the save icon on your toolbar and save
your script as “<code>script.R</code>”.</li>
<li>Make sure you copy the data for the lesson into this folder, if
they’re not there already.</li>
</ul></div>
<div class="section level3">
<h3 id="loading-data">Loading Data<a class="anchor" aria-label="anchor" href="#loading-data"></a></h3>
<p>Now that we are set up with an Rstudio project, we are sure that the
data and scripts we are using are all in our working directory. The data
files should be located in the directory <code>data</code>, inside the
working directory. Now we can load the data into R using
<code>read.csv</code>:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/inflammation-01.csv"</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<p>The expression <code>read.csv(...)</code> is a <a href="reference.html#function-call">function call</a> that asks R to run
the function <code>read.csv</code>.</p>
<p><code>read.csv</code> has two <a href="reference.html#argument">arguments</a>: the name of the file we
want to read, and whether the first line of the file contains names for
the columns of data. The filename needs to be a character string (or <a href="reference.html#string">string</a> for short), so we put it in
quotes. Assigning the second argument, <code>header</code>, to be
<code>FALSE</code> indicates that the data file does not have column
headers. We’ll talk more about the value <code>FALSE</code>, and its
converse <code>TRUE</code>, in lesson 04. In case of our
<code>inflammation-01.csv</code> example, R auto-generates column names
in the sequence <code>V1</code> (for “variable 1”), <code>V2</code>, and
so on, until <code>V40</code>.</p>
<div id="other-options-for-reading-csv-files" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="other-options-for-reading-csv-files" class="callout-inner">
<h3 class="callout-title">Other Options for Reading CSV Files<a class="anchor" aria-label="anchor" href="#other-options-for-reading-csv-files"></a>
</h3>
<div class="callout-content">
<p><code>read.csv</code> actually has many more arguments that you may
find useful when importing your own data in the future. You can learn
more about these options in this supplementary <a href="11-supp-read-write-csv.html">lesson</a>.</p>
</div>
</div>
</div>
<div id="loading-data-with-headers" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="loading-data-with-headers" class="callout-inner">
<h3 class="callout-title">Loading Data with Headers<a class="anchor" aria-label="anchor" href="#loading-data-with-headers"></a>
</h3>
<div class="callout-content">
<p>What happens if you forget to put <code>header = FALSE</code>? The
default value is <code>header = TRUE</code>, which you can check with
<code>?read.csv</code> or <code>help(read.csv)</code>. What do you
expect will happen if you leave the default value of
<code>header</code>? Before you run any code, think about what will
happen to the first few rows of your data frame, and its overall size.
Then run the following code and see if your expectations agree:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/inflammation-01.csv"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>R will construct column headers from values in your first row of
data, resulting in <code>X0 X0.1 X1 X3 X1.1 X2 ...</code>.</p>
<p>Note that the character <code>X</code> is prepended: a standalone
number would not be a valid variable name. Because column headers are
variables, the same naming rules apply. Appending <code>.1</code>,
<code>.2</code> etc. is necessary to avoid duplicate column headers.</p>
</div>
</div>
</div>
</div>
<div id="reading-different-decimal-point-formats" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="reading-different-decimal-point-formats" class="callout-inner">
<h3 class="callout-title">Reading Different Decimal Point Formats<a class="anchor" aria-label="anchor" href="#reading-different-decimal-point-formats"></a>
</h3>
<div class="callout-content">
<p>Depending on the country you live in, your standard can use the “dot”
or the “comma” as decimal mark. Also, different devices or software can
generate data with different kinds of decimal marks. Take a look at
<code>?read.csv</code> and write the code to load a file called
<code>commadec.txt</code> that has numeric values with commas as decimal
mark, separated by semicolons.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/commadec.txt"</span>, sep <span class="op">=</span> <span class="st">";"</span>, dec <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code></pre>
</div>
<p>or the built-in shortcut:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">read.csv2</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/commadec.txt"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>A function will perform its given action on whatever value is passed
to the argument(s). For example, in this case if we provided the name of
a different file to the argument <code>file</code>,
<code>read.csv</code> would read that instead. We’ll learn more about
the details of functions and their arguments in the next lesson.</p>
<p>Since we didn’t tell it to do anything else with the function’s
output, the console will display the full contents of the file
<code>inflammation-01.csv</code>. Try it out.</p>
<p><code>read.csv</code> reads the file, but we can’t use the data
unless we assign it to a variable. We can think of a variable as a
container with a name, such as <code>x</code>,
<code>current_temperature</code>, or <code>subject_id</code> that
contains one or more values. We can create a new variable and assign a
value to it using <code>&lt;-</code>.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weight_kg</span> <span class="op">&lt;-</span> <span class="fl">55</span></span></code></pre>
</div>
<p>Once a variable is created, we can use the variable name to refer to
the value it was assigned. The variable name now acts as a tag. Whenever
R reads that tag (<code>weight_kg</code>), it substitutes the value
(<code>55</code>).</p>
<figure><img src="fig/tag-variables.svg" alt="Variables as Tags" class="figure mx-auto d-block"></figure><p>To see the value of a variable, we can print it by typing the name of
the variable and hitting <kbd>Return</kbd> (or <kbd>Enter</kbd>). In
general, R will print to the console any object returned by a function
or operation <em>unless</em> we assign it to a variable.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weight_kg</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 55</code></pre>
</div>
<p>We can treat our variable like a regular number, and do arithmetic
with it:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># weight in pounds:</span></span>
<span><span class="fl">2.2</span> <span class="op">*</span> <span class="va">weight_kg</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 121</code></pre>
</div>
<figure><img src="fig/arithmetic-variables.svg" alt="Variables as Tags" class="figure mx-auto d-block"></figure><div id="commenting" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="commenting" class="callout-inner">
<h3 class="callout-title">Commenting<a class="anchor" aria-label="anchor" href="#commenting"></a>
</h3>
<div class="callout-content">
<p>We can add comments to our code using the <code>#</code> character.
It is useful to document our code in this way so that others (and us the
next time we read it) have an easier time following what the code is
doing.</p>
</div>
</div>
</div>
<p>We can also change a variable’s value by assigning it a new
value:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weight_kg</span> <span class="op">&lt;-</span> <span class="fl">57.5</span></span>
<span><span class="co"># weight in kilograms is now</span></span>
<span><span class="va">weight_kg</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 57.5</code></pre>
</div>
<div id="variable-naming-conventions" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="variable-naming-conventions" class="callout-inner">
<h3 class="callout-title">Variable Naming Conventions<a class="anchor" aria-label="anchor" href="#variable-naming-conventions"></a>
</h3>
<div class="callout-content">
<p>Historically, R programmers have used a variety of conventions for
naming variables. The <code>.</code> character in R can be a valid part
of a variable name; thus the above assignment could have easily been
<code>weight.kg &lt;- 57.5</code>. This is often confusing to R
newcomers who have programmed in languages where <code>.</code> has a
more significant meaning. Today, most R programmers 1) start variable
names with lower case letters, 2) separate words in variable names with
underscores, and 3) use only lowercase letters, underscores, and numbers
in variable names. The <em>Tidyverse Style Guide</em> includes a <a href="https://style.tidyverse.org/syntax.html" class="external-link">section</a> on this and
other style considerations.</p>
</div>
</div>
</div>
<figure><img src="fig/reassign-variables.svg" alt="Reassigning Variables" class="figure mx-auto d-block"></figure><p>Assigning a new value to a variable breaks the connection with the
old value; R forgets that number and applies the variable name to the
new value.</p>
<p>When you assign a value to a variable, R only stores the value, not
the calculation you used to create it. This is an important point if
you’re used to the way a spreadsheet program automatically updates
linked cells. Let’s look at an example.</p>
<p>First, we’ll convert <code>weight_kg</code> into pounds, and store
the new value in the variable <code>weight_lb</code>:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weight_lb</span> <span class="op">&lt;-</span> <span class="fl">2.2</span> <span class="op">*</span> <span class="va">weight_kg</span></span>
<span><span class="co"># weight in kg...</span></span>
<span><span class="va">weight_kg</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 57.5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ...and in pounds</span></span>
<span><span class="va">weight_lb</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 126.5</code></pre>
</div>
<p>In words, we’re asking R to look up the value we tagged
<code>weight_kg</code>, multiply it by 2.2, and tag the result with the
name <code>weight_lb</code>:</p>
<figure><img src="fig/new-variables.svg" alt="Creating Another Variable" class="figure mx-auto d-block"></figure><p>If we now change the value of <code>weight_kg</code>:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weight_kg</span> <span class="op">&lt;-</span> <span class="fl">100.0</span></span>
<span><span class="co"># weight in kg now...</span></span>
<span><span class="va">weight_kg</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 100</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ...and weight in pounds still</span></span>
<span><span class="va">weight_lb</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 126.5</code></pre>
</div>
<figure><img src="fig/memory-variables.svg" alt="Updating a Variable" class="figure mx-auto d-block"></figure><p>Since <code>weight_lb</code> doesn’t “remember” where its value came
from, it isn’t automatically updated when <code>weight_kg</code>
changes. This is different from the way spreadsheets work.</p>
<div id="printing-with-parentheses" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="printing-with-parentheses" class="callout-inner">
<h3 class="callout-title">Printing with Parentheses<a class="anchor" aria-label="anchor" href="#printing-with-parentheses"></a>
</h3>
<div class="callout-content">
<p>An alternative way to print the value of a variable is to use
<code>(</code> parentheses <code>)</code> around the assignment
statement. As an example:
<code>(total_weight &lt;- weight_kg*2.2 + weight_lb)</code> adds the
values of <code>weight_kg*2.2</code> and <code>weight_lb</code>, assigns
the result to the <code>total_weight</code>, and finally prints the
assigned value of the variable <code>total_weight</code>.</p>
</div>
</div>
</div>
<p>Now that we know how to assign things to variables, let’s re-run
<code>read.csv</code> and save its result into a variable called
‘dat’:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/inflammation-01.csv"</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<p>This statement doesn’t produce any output because the assignment
doesn’t display anything. If we want to check if our data has been
loaded, we can print the variable’s value by typing the name of the
variable <code>dat</code>. However, for large data sets it is convenient
to use the function <code>head</code> to display only the first few rows
of data.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21
1  0  0  1  3  1  2  4  7  8   3   3   3  10   5   7   4   7   7  12  18   6
2  0  1  2  1  2  1  3  2  2   6  10  11   5   9   4   4   7  16   8   6  18
3  0  1  1  3  3  2  6  2  5   9   5   7   4   5   4  15   5  11   9  10  19
4  0  0  2  0  4  2  2  1  6   7  10   7   9  13   8   8  15  10  10   7  17
5  0  1  1  3  3  1  3  5  2   4   4   7   6   5   3  10   8  10   6  17   9
6  0  0  1  2  2  4  2  1  6   4   7   6   6   9   9  15   4  16  18  12  12
  V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40
1  13  11  11   7   7   4   6   8   8   4   4   5   7   3   4   2   3   0   0
2   4  12   5  12   7  11   5  11   3   3   5   4   4   5   5   1   1   0   1
3  14  12  17   7  12  11   7   4   2  10   5   4   2   2   3   2   2   1   1
4   4   4   7   6  15   6   4   9  11   3   5   6   3   3   4   2   3   2   1
5  14   9   7  13   9  12   6   7   7   9   6   3   2   2   4   2   0   1   1
6   5  18   9   5   3  10   3  12   7   8   4   7   3   5   4   4   3   2   1</code></pre>
</div>
<div id="assigning-values-to-variables" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="assigning-values-to-variables" class="callout-inner">
<h3 class="callout-title">Assigning Values to Variables<a class="anchor" aria-label="anchor" href="#assigning-values-to-variables"></a>
</h3>
<div class="callout-content">
<p>Draw diagrams showing what variables refer to what values after each
statement in the following program:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="fl">47.5</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fl">122</span></span>
<span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="va">mass</span> <span class="op">*</span> <span class="fl">2.0</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="va">age</span> <span class="op">-</span> <span class="fl">20</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="fl">47.5</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fl">122</span></span></code></pre>
</div>
<figure><img src="fig/mass-age-assign-1.svg" alt="Assigning Variables" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="va">mass</span> <span class="op">*</span> <span class="fl">2.0</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="va">age</span> <span class="op">-</span> <span class="fl">20</span></span></code></pre>
</div>
<figure><img src="fig/mass-age-assign-2.svg" alt="Assigning Variables" class="figure mx-auto d-block"></figure></div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="manipulating-data">Manipulating Data<a class="anchor" aria-label="anchor" href="#manipulating-data"></a></h3>
<p>Now that our data are loaded into R, we can start doing things with
them. First, let’s ask what type of thing <code>dat</code> is:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "data.frame"</code></pre>
</div>
<p>The output tells us that it’s a data frame. Think of this structure
as a spreadsheet in MS Excel that many of us are familiar with. Data
frames are very useful for storing data and you will use them frequently
when programming in R. A typical data frame of experimental data
contains individual observations in rows and variables in columns.</p>
<p>We can see the shape, or <a href="reference.html#dimensions-of-an-array">dimensions</a>, of the data
frame with the function <code>dim</code>:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dim</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 60 40</code></pre>
</div>
<p>This tells us that our data frame, <code>dat</code>, has 60 rows and
40 columns.</p>
<p>If we want to get a single value from the data frame, we can provide
an <a href="reference.html#index">index</a> in square brackets. The
first number specifies the row and the second the column:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first value in dat, row 1, column 1</span></span>
<span><span class="va">dat</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># middle value in dat, row 30, column 20</span></span>
<span><span class="va">dat</span><span class="op">[</span><span class="fl">30</span>, <span class="fl">20</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 16</code></pre>
</div>
<p>The first value in a data frame index is the row, the second value is
the column. If we want to select more than one row or column, we can use
the function <code>c</code>, which <strong>c</strong>ombines the values
you give it into one vector or list. For example, to pick columns 10 and
20 from rows 1, 3, and 5, we can do this:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu">c</span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  V10 V20
1   3  18
3   9  10
5   4  17</code></pre>
</div>
<p>We frequently want to select contiguous rows or columns, such as the
first ten rows, or columns 3 through 7. You can use <code>c</code> for
this, but it’s more convenient to use the <code>:</code> operator. This
special function generates sequences of numbers:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">3</span><span class="op">:</span><span class="fl">12</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  3  4  5  6  7  8  9 10 11 12</code></pre>
</div>
<p>For example, we can select the first ten columns of values for the
first four rows like this:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10
1  0  0  1  3  1  2  4  7  8   3
2  0  1  2  1  2  1  3  2  2   6
3  0  1  1  3  3  2  6  2  5   9
4  0  0  2  0  4  2  2  1  6   7</code></pre>
</div>
<p>or the first ten columns of rows 5 to 10 like this:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10
5   0  1  1  3  3  1  3  5  2   4
6   0  0  1  2  2  4  2  1  6   4
7   0  0  2  2  4  2  2  5  5   8
8   0  0  1  2  3  1  2  3  5   3
9   0  0  0  3  1  5  6  5  5   8
10  0  1  1  2  1  3  5  3  5   8</code></pre>
</div>
<p>If you want to select all rows or all columns, leave that index value
empty.</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># All columns from row 5</span></span>
<span><span class="va">dat</span><span class="op">[</span><span class="fl">5</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21
5  0  1  1  3  3  1  3  5  2   4   4   7   6   5   3  10   8  10   6  17   9
  V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40
5  14   9   7  13   9  12   6   7   7   9   6   3   2   2   4   2   0   1   1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># All rows from column 16-18</span></span>
<span><span class="va">dat</span><span class="op">[</span>, <span class="fl">16</span><span class="op">:</span><span class="fl">18</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   V16 V17 V18
1    4   7   7
2    4   7  16
3   15   5  11
4    8  15  10
5   10   8  10
6   15   4  16
7   13   5  12
8    9  15  11
9   11   9  10
10   6  13   8
11   3   7  13
12   8  14  11
13  12   4  17
14   3  10  13
15   5   7  17
16  10   7   8
17  11  12   5
18   4  14   7
19  11  15  17
20  13   6   5
21  15  13   6
22   5  12  12
23  14   5   5
24  13   7  14
25   4  12   9
26   9   5  16
27  13   4  13
28   6  15   6
29   7   6  11
30   6   8   7
31  14  12   8
32   3   8  10
33  15  15  10
34   4  12   9
35  15   9  17
36  11   5   7
37   7   4   7
38  10   6   7
39  15  12  13
40   6   8  15
41   5   7   5
42   6  10  13
43  15  11  12
44  11   6  10
45  15  12  15
46   6   7  11
47  11  16  12
48  15   5  15
49  14   4   6
50   4   7   9
51  10  13   6
52  15  15  12
53  11  15  13
54   6  11  12
55  13   8   9
56   8   8  16
57   4  16  11
58  13  13   9
59  12  15   5
60   9  14  11</code></pre>
</div>
<p>If you leave both index values empty (i.e., <code>dat[,]</code>), you
get the entire data frame.</p>
<div id="addressing-columns-by-name" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="addressing-columns-by-name" class="callout-inner">
<h3 class="callout-title">Addressing Columns by Name<a class="anchor" aria-label="anchor" href="#addressing-columns-by-name"></a>
</h3>
<div class="callout-content">
<p>Columns can also be addressed by name, with either the <code>$</code>
operator (ie. <code>dat$V16</code>) or square brackets (ie.
<code>dat[, 'V16']</code>). You can learn more about subsetting by
column name in this supplementary <a href="10-supp-addressing-data.html">lesson</a>.</p>
</div>
</div>
</div>
<p>Now let’s perform some common mathematical operations to learn more
about our inflammation data. When analyzing data we often want to look
at partial statistics, such as the maximum value per patient or the
average value per day. One way to do this is to select the data we want
to create a new temporary data frame, and then perform the calculation
on this subset:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first row, all of the columns</span></span>
<span><span class="va">patient_1</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span></span>
<span><span class="co"># max inflammation for patient 1</span></span>
<span><span class="fu">max</span><span class="op">(</span><span class="va">patient_1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 18</code></pre>
</div>
<!-- 
    OUCH!! The following may be true, but it will vary by R version, not by
    installation! There shouldn't be an issue with a data frame where all
    columns are numeric without missing values. Under those circumstances,
    coercion should do what you expect. You'll get problems with mixed
    types (factors, character etc), or with missing values. If this is
    actually a problem, we need to change the example - we should be able
    to come up with an example that doesn't require this ugliness in the
    very first lesson. 
    
    Also, columns always work as expected because by definition a column
    contains a vector of values of the same type. Rows include values from
    different columns, which of course can be different types. This doesn't
    need to be confusing, and if we're careful in our presentation here we
    can avoid this until the students know enough to cope rationally.
-->
<!--
> ## Forcing Conversion
>
> The code above may give you an error in some R installations,
> since R does not automatically convert a row from a `data.frame` to a vector.
> (Confusingly, subsetted columns are automatically converted.)
> If this happens, you can use the `as.numeric` command to convert the row of data to a numeric vector:
>
> `patient_1 <- as.numeric(dat[1, ])`
>
> `max(patient_1)`
>
> You can also check the `class` of each object:
>
> `class(dat[1, ])`
>
> `class(as.numeric(dat[1, ]))`
{: .callout}
-->
<p>We don’t actually need to store the row in a variable of its own.
Instead, we can combine the selection and the function call:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># max inflammation for patient 2</span></span>
<span><span class="fu">max</span><span class="op">(</span><span class="va">dat</span><span class="op">[</span><span class="fl">2</span>, <span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 18</code></pre>
</div>
<p>R also has functions for other common calculations, e.g. finding the
minimum, mean, median, and standard deviation of the data:</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># minimum inflammation on day 7</span></span>
<span><span class="fu">min</span><span class="op">(</span><span class="va">dat</span><span class="op">[</span>, <span class="fl">7</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># mean inflammation on day 7</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">dat</span><span class="op">[</span>, <span class="fl">7</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3.8</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># median inflammation on day 7</span></span>
<span><span class="fu">median</span><span class="op">(</span><span class="va">dat</span><span class="op">[</span>, <span class="fl">7</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># standard deviation of inflammation on day 7</span></span>
<span><span class="fu">sd</span><span class="op">(</span><span class="va">dat</span><span class="op">[</span>, <span class="fl">7</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.725187</code></pre>
</div>
<div id="forcing-conversion" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="forcing-conversion" class="callout-inner">
<h3 class="callout-title">Forcing Conversion<a class="anchor" aria-label="anchor" href="#forcing-conversion"></a>
</h3>
<div class="callout-content">
<p>Note that R may return an error when you attempt to perform similar
calculations on subsetted <em>rows</em> of data frames. This is because
some functions in R automatically convert the object type to a numeric
vector, while others do not (e.g. <code>max(dat[1, ])</code> works as
expected, while <code>mean(dat[1, ])</code> returns <code>NA</code> and
a warning). You get the expected output by including an explicit call to
<code>as.numeric()</code>, e.g. <code>mean(as.numeric(dat[1, ]))</code>.
By contrast, calculations on subsetted <em>columns</em> always work as
expected, since columns of data frames are already defined as
vectors.</p>
</div>
</div>
</div>
<p>R also has a function that summaries the previous common
calculations:</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summarize function</span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">dat</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       V1          V2             V3              V4      
 Min.   :0   Min.   :0.00   Min.   :0.000   Min.   :0.00  
 1st Qu.:0   1st Qu.:0.00   1st Qu.:1.000   1st Qu.:1.00  
 Median :0   Median :0.00   Median :1.000   Median :2.00  
 Mean   :0   Mean   :0.45   Mean   :1.117   Mean   :1.75  
 3rd Qu.:0   3rd Qu.:1.00   3rd Qu.:2.000   3rd Qu.:3.00  
 Max.   :0   Max.   :1.00   Max.   :2.000   Max.   :3.00  </code></pre>
</div>
<p>For every column in the data frame, the function “summary”
calculates: the minimum value, the first quartile, the median, the mean,
the third quartile and the max value, giving helpful details about the
sample distribution.</p>
<p>What if we need the maximum inflammation for all patients, or the
average for each day? As the diagram below shows, we want to perform the
operation across a margin of the data frame:</p>
<figure><img src="fig/r-operations-across-margins.svg" alt="Operations Across Margins" class="figure mx-auto d-block"></figure><p>To support this, we can use the <code>apply</code> function.</p>
<div id="getting-help" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="getting-help" class="callout-inner">
<h3 class="callout-title">Getting Help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h3>
<div class="callout-content">
<p>To learn about a function in R, e.g. <code>apply</code>, we can read
its help documention by running <code>help(apply)</code> or
<code>?apply</code>.</p>
</div>
</div>
</div>
<p><code>apply</code> allows us to repeat a function on all of the rows
(<code>MARGIN = 1</code>) or columns (<code>MARGIN = 2</code>) of a data
frame.</p>
<p>Thus, to obtain the average inflammation of each patient we will need
to calculate the mean of all of the rows (<code>MARGIN = 1</code>) of
the data frame.</p>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">avg_patient_inflammation</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, <span class="va">mean</span><span class="op">)</span></span></code></pre>
</div>
<p>And to obtain the average inflammation of each day we will need to
calculate the mean of all of the columns (<code>MARGIN = 2</code>) of
the data frame.</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">avg_day_inflammation</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">2</span>, <span class="va">mean</span><span class="op">)</span></span></code></pre>
</div>
<p>Since the second argument to <code>apply</code> is
<code>MARGIN</code>, the above command is equivalent to
<code>apply(dat, MARGIN = 2, mean)</code>. We’ll learn why this is so in
the next lesson.</p>
<div id="efficient-alternatives" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="efficient-alternatives" class="callout-inner">
<h3 class="callout-title">Efficient Alternatives<a class="anchor" aria-label="anchor" href="#efficient-alternatives"></a>
</h3>
<div class="callout-content">
<p>Some common operations have more efficient alternatives. For example,
you can calculate the row-wise or column-wise means with
<code>rowMeans</code> and <code>colMeans</code>, respectively.</p>
</div>
</div>
</div>
<div id="subsetting-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="subsetting-data" class="callout-inner">
<h3 class="callout-title">Subsetting Data<a class="anchor" aria-label="anchor" href="#subsetting-data"></a>
</h3>
<div class="callout-content">
<p>We can take subsets of character vectors as well:</p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">animal</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"m"</span>, <span class="st">"o"</span>, <span class="st">"n"</span>, <span class="st">"k"</span>, <span class="st">"e"</span>, <span class="st">"y"</span><span class="op">)</span></span>
<span><span class="co"># first three characters</span></span>
<span><span class="va">animal</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "m" "o" "n"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># last three characters</span></span>
<span><span class="va">animal</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "k" "e" "y"</code></pre>
</div>
<ol style="list-style-type: decimal"><li><p>If the first four characters are selected using the subset
<code>animal[1:4]</code>, how can we obtain the first four characters in
reverse order?</p></li>
<li><p>What is <code>animal[-1]</code>? What is <code>animal[-4]</code>?
Given those answers, explain what <code>animal[-1:-4]</code>
does.</p></li>
<li><p>Use a subset of <code>animal</code> to create a new character
vector that spells the word “eon”,
i.e. <code>c("e", "o", "n")</code>.</p></li>
</ol></div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solutions
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li><p><code>animal[4:1]</code></p></li>
<li><p><code>"o" "n" "k" "e" "y"</code> and
<code>"m" "o" "n" "e" "y"</code>, which means that a single
<code>-</code> removes the element at the given index position.
<code>animal[-1:-4]</code> remove the subset, returning
<code>"e" "y"</code>, which is equivalent to
<code>animal[5:6]</code>.</p></li>
<li><p><code>animal[c(5,2,3)]</code> combines indexing with the
<code>c</code> function.</p></li>
</ol></div>
</div>
</div>
</div>
<div id="subsetting-more-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="subsetting-more-data" class="callout-inner">
<h3 class="callout-title">Subsetting More Data<a class="anchor" aria-label="anchor" href="#subsetting-more-data"></a>
</h3>
<div class="callout-content">
<p>Suppose you want to determine the maximum inflammation for patient 5
across days three to seven. To do this you would extract the relevant
subset from the data frame and calculate the maximum value. Which of the
following lines of R code gives the correct answer?</p>
<ol style="list-style-type: decimal"><li><code>max(dat[5, ])</code></li>
<li><code>max(dat[3:7, 5])</code></li>
<li><code>max(dat[5, 3:7])</code></li>
<li><code>max(dat[5, 3, 7])</code></li>
</ol></div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Answer: 3</p>
<p>Explanation: You want to extract the part of the dataframe
representing data for patient 5 from days three to seven. In this
dataframe, patient data is organised in rows and the days are
represented by the columns. Subscripting in R follows the
<code>[i, j]</code> principle, where <code>i = rows</code> and
<code>j = columns</code>. Thus, answer 3 is correct since the patient is
represented by the value for i (5) and the days are represented by the
values in j, which is a subset spanning day 3 to 7.</p>
</div>
</div>
</div>
</div>
<div id="subsetting-and-re-assignment" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="subsetting-and-re-assignment" class="callout-inner">
<h3 class="callout-title">Subsetting and Re-Assignment<a class="anchor" aria-label="anchor" href="#subsetting-and-re-assignment"></a>
</h3>
<div class="callout-content">
<p>Using the inflammation data frame <code>dat</code> from above: Let’s
pretend there was something wrong with the instrument on the first five
days for every second patient (#2, 4, 6, etc.), which resulted in the
measurements being twice as large as they should be.</p>
<ol style="list-style-type: decimal"><li>Write a vector containing each affected patient (hint:
<code>?seq</code>)</li>
<li>Create a new data frame in which you halve the first five days’
values in only those patients</li>
<li>Print out the corrected data frame to check that your code has fixed
the problem</li>
</ol></div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">whichPatients</span> <span class="op">&lt;-</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">60</span>, <span class="fl">2</span><span class="op">)</span> <span class="co"># i.e., which rows</span></span>
<span><span class="va">whichDays</span> <span class="op">&lt;-</span> <span class="fu">seq</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>         <span class="co"># i.e., which columns</span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="va">dat</span></span>
<span><span class="co"># check the size of your subset: returns `30 5`, that is 30 [rows=patients] by 5 [columns=days]</span></span>
<span><span class="fu">dim</span><span class="op">(</span><span class="va">dat2</span><span class="op">[</span><span class="va">whichPatients</span>, <span class="va">whichDays</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">dat2</span><span class="op">[</span><span class="va">whichPatients</span>, <span class="va">whichDays</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">dat2</span><span class="op">[</span><span class="va">whichPatients</span>, <span class="va">whichDays</span><span class="op">]</span> <span class="op">/</span> <span class="fl">2</span></span>
<span><span class="va">dat2</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="using-the-apply-function-on-patient-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="using-the-apply-function-on-patient-data" class="callout-inner">
<h3 class="callout-title">Using the Apply Function on Patient Data<a class="anchor" aria-label="anchor" href="#using-the-apply-function-on-patient-data"></a>
</h3>
<div class="callout-content">
<p>Challenge: the apply function can be used to summarize datasets and
subsets of data across rows and columns using the MARGIN argument.
Suppose you want to calculate the mean inflammation for specific days
and patients in the patient dataset (i.e. 60 patients across 40
days).</p>
<p>Please use a combination of the apply function and indexing to:</p>
<ol style="list-style-type: decimal"><li>calculate the mean inflammation for patients 1 to 5 over the whole
40 days</li>
<li>calculate the mean inflammation for days 1 to 10 (across all
patients).</li>
<li>calculate the mean inflammation for every second day (across all
patients).</li>
</ol><p>Think about the number of rows and columns you would expect as the
result before each apply call and check your intuition by applying the
mean function.</p>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1.</span></span>
<span><span class="fu">apply</span><span class="op">(</span><span class="va">dat</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>, <span class="fl">1</span>, <span class="va">mean</span><span class="op">)</span></span>
<span><span class="co"># 2.</span></span>
<span><span class="fu">apply</span><span class="op">(</span><span class="va">dat</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, <span class="fl">2</span>, <span class="va">mean</span><span class="op">)</span></span>
<span><span class="co"># 3.</span></span>
<span><span class="fu">apply</span><span class="op">(</span><span class="va">dat</span><span class="op">[</span>, <span class="fu">seq</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">40</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">]</span>, <span class="fl">2</span>, <span class="va">mean</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a></h3>
<p>The mathematician Richard Hamming once said, “The purpose of
computing is insight, not numbers,” and the best way to develop insight
is often to visualize data. Visualization deserves an entire lecture (or
course) of its own, but we can explore a few of R’s plotting
features.</p>
<p>Let’s take a look at the average inflammation over time. Recall that
we already calculated these values above using
<code>apply(dat, 2, mean)</code> and saved them in the variable
<code>avg_day_inflammation</code>. Plotting the values is done with the
function <code>plot</code>.</p>
<div class="codewrapper sourceCode" id="cb71">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot</span><span class="op">(</span><span class="va">avg_day_inflammation</span><span class="op">)</span></span></code></pre>
</div>
<figure style="text-align: center"><img src="fig/01-starting-with-data-rendered-plot-avg-inflammation-1.png" alt="Scatter plot of average inflammation versus time demonstrating the result of using the plot function" class="figure mx-auto d-block"><figcaption>
Scatter plot of average inflammation versus time demonstrating the
result of using the plot function
</figcaption></figure><p>Above, we gave the function <code>plot</code> a vector of numbers
corresponding to the average inflammation per day across all patients.
<code>plot</code> created a scatter plot where the y-axis is the average
inflammation level and the x-axis is the order, or index, of the values
in the vector, which in this case correspond to the 40 days of
treatment. The result is roughly a linear rise and fall, which is
suspicious: based on other studies, we expect a sharper rise and slower
fall. Let’s have a look at two other statistics: the maximum and minimum
inflammation per day.</p>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">max_day_inflammation</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">2</span>, <span class="va">max</span><span class="op">)</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">max_day_inflammation</span><span class="op">)</span></span></code></pre>
</div>
<figure style="text-align: center"><img src="fig/01-starting-with-data-rendered-plot-max-inflammation-1.png" alt="Scatter plot of maximum inflammation versus time demonstrating the result of using the plot function" class="figure mx-auto d-block"><figcaption>
Scatter plot of maximum inflammation versus time demonstrating the
result of using the plot function
</figcaption></figure><div class="codewrapper sourceCode" id="cb73">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">min_day_inflammation</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">2</span>, <span class="va">min</span><span class="op">)</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">min_day_inflammation</span><span class="op">)</span></span></code></pre>
</div>
<figure style="text-align: center"><img src="fig/01-starting-with-data-rendered-plot-min-inflammation-1.png" alt="Scatter plot of minimum inflammation versus time demonstrating the result of using the plot function" class="figure mx-auto d-block"><figcaption>
Scatter plot of minimum inflammation versus time demonstrating the
result of using the plot function
</figcaption></figure><p>The maximum value rises and falls perfectly smoothly, while the
minimum seems to be a step function. Neither result seems particularly
likely, so either there’s a mistake in our calculations or something is
wrong with our data.</p>
<div id="plotting-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plotting-data" class="callout-inner">
<h3 class="callout-title">Plotting Data<a class="anchor" aria-label="anchor" href="#plotting-data"></a>
</h3>
<div class="callout-content">
<p>Create a plot showing the standard deviation of the inflammation data
for each day across all patients.</p>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sd_day_inflammation</span> <span class="op">&lt;-</span> <span class="fu">apply</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">2</span>, <span class="va">sd</span><span class="op">)</span></span>
<span><span class="fu">plot</span><span class="op">(</span><span class="va">sd_day_inflammation</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Use <code>variable &lt;- value</code> to assign a value to a
variable in order to record it in memory.</li>
<li>Objects are created on demand whenever a value is assigned to
them.</li>
<li>The function <code>dim</code> gives the dimensions of a data
frame.</li>
<li>Use <code>object[x, y]</code> to select a single element from a data
frame.</li>
<li>Use <code>from:to</code> to specify a sequence that includes the
indices from <code>from</code> to <code>to</code>.</li>
<li>All the indexing and subsetting that works on data frames also works
on vectors.</li>
<li>Use <code>#</code> to add comments to programs.</li>
<li>Use <code>mean</code>, <code>max</code>, <code>min</code> and
<code>sd</code> to calculate simple statistics.</li>
<li>Use <code>apply</code> to calculate statistics across the rows or
columns of a data frame.</li>
<li>Use <code>plot</code> to create simple visualizations.</li>
</ul></div>
</div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="02-func-R.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="index.html" rel="prev"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="02-func-R.html" rel="next">Next: Creating Functions... <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
				<p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/swcarpentry/r-novice-inflammation/edit/main/episodes/01-starting-with-data.Rmd" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/swcarpentry/r-novice-inflammation/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a> 
        | <a href="https://github.com/swcarpentry/r-novice-inflammation/" class="external-link">Source</a></p>
				<p><a href="https://github.com/swcarpentry/r-novice-inflammation/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">Template licensed under CC-BY 4.0</a> by <a href="https://carpentries.org" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper" class="external-link">sandpaper (0.12.5)</a>,
        <a href="https://github.com/carpentries/pegboard" class="external-link">pegboard (0.5.3)</a>,
      and <a href="https://github.com/carpentries/varnish/tree/0.2.17" class="external-link">varnish (0.2.17)</a>.</p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
			<i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back to top"></i><br><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://swcarpentry.github.io/r-novice-inflammation/01-starting-with-data.html",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Analyzing Patient Data",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/r-novice-inflammation/01-starting-with-data.html",
  "identifier": "https://swcarpentry.github.io/r-novice-inflammation/01-starting-with-data.html",
  "dateCreated": "2014-12-18",
  "dateModified": "2023-08-11",
  "datePublished": "2023-08-11"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

